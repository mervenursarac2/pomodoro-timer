<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>focus</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Poppins:wght@700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            height: 100vh;
            width: 100vw;
            background-image: url("image/light_bg.png");
            background-size: 100% 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Poppins', sans-serif;
        }
        .profile-icon {
            position: fixed; 
            top: 20px;
            left: 30px;
            font-size: 2.5rem;
            color: #B16745; 
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease; 
        }

        .profile-icon:hover {
            color: #75722E; 
            transform: scale(1.1); 
        }
        main {
            width: 800px;
            height: auto;
            margin-top: -150px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 40px;
            padding: 20px;
        }
        
        .timer-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        #timer-container {
            position: relative;
            width: 300px;
            height: 300px;
        }
        
        #timer {
            width: 100%;
            height: 100%;
            background-color: #FEF0D1;
            border: 12px solid #75722E;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #75722E;
            font-size: 65px;
            position: relative;
            z-index: 1;
        }
        
        #circular-slider {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 2;
            cursor: pointer;
        }
        
        #circular-slider-track {
            fill: none;
            stroke: rgba(117, 114, 46, 0.3);
            stroke-width: 12px;
            stroke-linecap: round;
        }
        
        #circular-slider-progress {
            fill: none;
            stroke: #E2C75C;
            stroke-width: 10px;
            stroke-linecap: round;
            stroke-dasharray: 879.2;
            stroke-dashoffset: 879.2;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        #circular-slider-thumb {
            fill: #B16745;
            stroke-width: 1px;
            cursor: grab;
        }
        
        #circular-slider-thumb:active {
            cursor: grabbing;
        }
        
        #start {
            padding: 10px 30px;
            background-color: #B16745;
            color: #EFEBCE;
            border: none;
            border-radius: 30px;
            font-family: 'Poppins', sans-serif;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        #start:hover {
            background-color: #E2C75C;
            color: #EFEBCE;
            transform: scale(1.1); 
            transition: all 0.3s ease; 
        }
        
        #log-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        #date {
            text-align: center;
            color: #B16745;
            font-size: 20px;
            font-weight: bold;
        }
        
        #log-list {
            list-style: none;
            width: 410px;
            height: 300px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            gap: 20px;
            padding-right: 10px;
            flex-shrink: 0;
        }
        
        .log {
            width: 100%;
            height: 60px;
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #EFEBCE;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
            font-weight: bold;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .log:nth-child(4n+1) { background-color: #75722D; }
        .log:nth-child(4n+2) { background-color: #9D9749; }
        .log:nth-child(4n+3) { background-color: #E2C75C; }
        .log:nth-child(4n+4) { background-color: #B16745; }

        #log-list::-webkit-scrollbar {
            width: 8px;
        }
        #log-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        #log-list::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        #log-list::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
   <div class="profile-icon">
    <i class='bx bx-user-circle'></i>
  </div>
    <main>
        <div class="timer-section">
            <div id="timer-container">
                <div id="timer">25:00</div>
                <svg id="circular-slider" viewBox="0 0 300 300">
                    <circle id="circular-slider-track" cx="150" cy="150" r="140"></circle>
                    <circle id="circular-slider-progress" cx="150" cy="150" r="140"></circle>
                    <circle id="circular-slider-thumb" cx="150" cy="10" r="12"></circle>
                </svg>
            </div>
            <button id="start">start</button>
        </div>

        <div id="log-section">
            <div id="date">July 10, 2023</div>
            <ul id="log-list">
                <li class="log">1.</li>
                <li class="log">2.</li>
                <li class="log">3.</li>
                <li class="log">4.</li>
                <li class="log">5.</li>
                <li class="log">6.</li>
            </ul>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.getElementById('circular-slider');
            const progress = document.getElementById('circular-slider-progress');
            const thumb = document.getElementById('circular-slider-thumb');
            const timerDisplay = document.getElementById('timer');
            
            const centerX = 150;
            const centerY = 150;
            const radius = 140;
            const circumference = 2 * Math.PI * radius;
            let isDragging = false;
            
            // Başlangıç değeri (25 dakika)
            let currentValue = 25;
            updateSlider(currentValue);
            
           function snapToNearest5(minutes) {
                // 0-120 arasında ve 5'in katları olacak şekilde ayarla
                minutes = Math.max(0, Math.min(120, minutes));
                return Math.round(minutes / 5) * 5;
            }

            
            function updateSlider(minutes) {
                // Değeri 5'in katlarına yuvarla
                minutes = snapToNearest5(minutes);
                
                // 15-120 dakika arasını 0-1 arası değere çevir
                const percentage = minutes/120;
                const offset = circumference - (percentage * circumference);
                progress.style.strokeDashoffset = offset;
                
                // Thumb pozisyonunu güncelle (0 derece en üstte)
                const angle = percentage * 360 - 90; // -90 derece başlangıç pozisyonu için
                const thumbX = centerX + radius * Math.cos(angle * Math.PI / 180);
                const thumbY = centerY + radius * Math.sin(angle * Math.PI / 180);
                thumb.setAttribute('cx', thumbX);
                thumb.setAttribute('cy', thumbY);
                
                // Timer değerini güncelle
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:00`;
                return minutes; // Gerçek ayarlanan değeri döndür
            }
            
            function getAngleFromMouse(event, element) {
                const rect = element.getBoundingClientRect();
                const x = event.clientX - rect.left - centerX;
                const y = event.clientY - rect.top - centerY;
                let angle = Math.atan2(y, x) * 180 / Math.PI + 90;
                if (angle < 0) angle += 360;
                return angle;
            }
            
            // Thumb'ı sürükleme olayları
            thumb.addEventListener('mousedown', function(e) {
                isDragging = true;
                e.stopPropagation();
                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', function() {
                    isDragging = false;
                    document.removeEventListener('mousemove', onMouseMove);
                });
            });
            
            // Slider'ın herhangi bir yerine tıklama
            slider.addEventListener('mousedown', function(e) {
                if (e.target === slider || e.target === progress || e.target.id === 'circular-slider-track') {
                    const angle = getAngleFromMouse(e, slider);
                    const rawValue = (angle / 360) * (120 - 15) + 15;
                    currentValue = updateSlider(rawValue);
                }
            });
            
           let lastAngle = null;

        function onMouseMove(e) {
            if (!isDragging) return;

            const angle = getAngleFromMouse(e, slider);

            if (lastAngle !== null) {
                let diff = angle - lastAngle;

                // Fark pozitifse saat yönü (arttır), negatifse ters (azalt)
                if (diff > 0 && diff < 180) {
                    currentValue = Math.min(120, currentValue + 1);
                } else if (diff < 0 && diff > -180) {
                    currentValue = Math.max(15, currentValue - 1);
                }
                updateSlider(currentValue);
            }

            lastAngle = angle;
        }

        });
    </script>
</body>
</html>